create schema estudo_caso1_CC1N;
use estudo_caso1_CC1N;

# TABELAS SEM CHAVES ESTRANGEIRAS
CREATE TABLE IF NOT EXISTS FORNECEDORES(
    FORNEC_COD INT PRIMARY KEY,
    FORNEC_NOME VARCHAR(45) NOT NULL,
    FORNEC_RUA VARCHAR(45) NOT NULL,
    FORNEC_NUMRUA INT,
    FORNEC_BAIRRO VARCHAR(45) NOT NULL,
    FORNEC_ESTADO VARCHAR(45) NOT NULL,
    FORNEC_PAIS VARCHAR(30) NOT NULL,
    FORNEC_CODPOSTAL VARCHAR(10) NOT NULL,
    FORNEC_TELEFONE VARCHAR(15) NOT NULL,
    FORNEC_CONTATO TEXT NOT NULL);

CREATE TABLE IF NOT EXISTS FILIAIS(
    FILIAL_COD INT PRIMARY KEY,
    FILIAL_NOME VARCHAR(45) NOT NULL,
    FILIAL_RUA VARCHAR(100) NOT NULL,
    FILIAL_NUMRUA INT,
    FILIAL_MUNICIPIO VARCHAR(50) NOT NULL,
    FILIAL_BAIRRO VARCHAR(50) NOT NULL,
    FILIAL_CIDADE VARCHAR(50) NOT NULL,
    FILIAL_ESTADO VARCHAR(50) NOT NULL,
    FILIAL_PAIS VARCHAR(50) NOT NULL,
    FILIAL_CODPOSTAL VARCHAR(10) NOT NULL,
    FILIAL_CAPACIDADE TEXT NOT NULL);

CREATE TABLE IF NOT EXISTS PRODUTOS(
    PROD_COD INT PRIMARY KEY,
    PROD_NOME VARCHAR(50) NOT NULL,
    PROD_DESCRICAO TEXT NOT NULL,
    PROD_ESPECTEC TEXT NOT NULL,
    PROD_QUANT DECIMAL(10,3) NOT NULL,
    PROD_PRECOUNIT DECIMAL(10,2) NOT NULL,
    PROD_UNIDMEDIDA VARCHAR(10) NOT NULL,
    PROD_ESTOQ_MIN DECIMAL(10,3) NOT NULL);

# TABELAS COM CHAVES ESTRANGEIRAS
CREATE TABLE IF NOT EXISTS PEDIDOS(
    PED_CODIGO INT PRIMARY KEY,
    PED_DATA DATE NOT NULL,
    PED_HORA TIME NOT NULL,
    PED_PREVISAO DATE NOT NULL,
    PED_STATUS ENUM('PENDENTE', 'CONCLUÍDO', 'EM ESPERA') NOT NULL,
    PED_FORNECEDOR INT NOT NULL,
    CONSTRAINT FK_FORNECEDOR FOREIGN KEY (PED_FORNECEDOR) REFERENCES FORNECEDORES(FORNEC_COD));

CREATE TABLE IF NOT EXISTS RECEBIMENTOS(
    RECEB_DATA DATE NOT NULL,
    RECEB_HORA TIME NOT NULL,
    RECEB_QUANT_PROD DECIMAL(10,3),
    RECEB_CONDICAO TEXT NOT NULL,
    RECEB_PEDIDOS INT PRIMARY KEY,
    CONSTRAINT FK_PEDIDOS FOREIGN KEY (RECEB_PEDIDOS) REFERENCES PEDIDOS(PED_CODIGO));

# ENTIDADES ASSOCIATIVAS
CREATE TABLE IF NOT EXISTS PEDIDOS_PRODUTOS(
    PDPR_PEDIDOS INT,
    PDPR_PRODUTOS INT,
    PRIMARY KEY (PDPR_PEDIDOS, PDPR_PRODUTOS),
    PDPR_QUANT DECIMAL(10,3) NOT NULL,
    CONSTRAINT PDPR_FK_PEDIDOS FOREIGN KEY (PDPR_PEDIDOS) REFERENCES PEDIDOS(PED_CODIGO),
    CONSTRAINT PDPR_FK_PRODUTOS FOREIGN KEY (PDPR_PRODUTOS) REFERENCES PRODUTOS(PROD_COD));

CREATE TABLE IF NOT EXISTS FILIAIS_PRODUTOS(
    FLPR_FILIAL INT,
    FLPR_PRODUTOS INT,
    FLPR_QUANT DECIMAL(10,3) NOT NULL,
    PRIMARY KEY (FLPR_FILIAL, FLPR_PRODUTOS),
    CONSTRAINT FLPR_FK_FILIAIS FOREIGN KEY (FLPR_FILIAL) REFERENCES FILIAIS(FILIAL_COD),
    CONSTRAINT FLPR_FK_PRODUTOS FOREIGN KEY (FLPR_PRODUTOS) REFERENCES PRODUTOS(PROD_COD));

CREATE TABLE IF NOT EXISTS FORNECEDORES_PRODUTOS(
FRPR_FORNECEDOR INT,
FRPR_PRODUTOS INT,
PRIMARY KEY(FRPR_FORNECEDOR,FRPR_PRODUTOS),
CONSTRAINT FRPR_FK_FORNECEDORES FOREIGN KEY(FRPR_FORNECEDOR)
REFERENCES FORNECEDORES(FORNEC_COD),
CONSTRAINT FRPR_FK_PRODUTOS FOREIGN KEY(FRPR_PRODUTOS) 
REFERENCES PRODUTOS(PROD_COD));

#EXEMPLOS DE ALTER TABLE
ALTER TABLE FORNECEDORES ADD COLUMN FORNEC_EMAIL VARCHAR(100);  -- Exemplo de ADD
ALTER TABLE FORNECEDORES DROP COLUMN FORNEC_EMAIL;  -- Exemplo de DROP
ALTER TABLE FORNECEDORES MODIFY COLUMN FORNEC_NOME VARCHAR(50);  -- Exemplo de MODIFY
ALTER TABLE FORNECEDORES CHANGE COLUMN FORNEC_NUMRUA FORNEC_NUMERO_RUA INT;  -- Exemplo de CHANGE

ALTER TABLE FILIAIS ADD COLUMN FILIAL_TELEFONE VARCHAR(15);  -- Exemplo de ADD
ALTER TABLE FILIAIS DROP COLUMN FILIAL_TELEFONE;  -- Exemplo de DROP
ALTER TABLE FILIAIS MODIFY COLUMN FILIAL_NOME VARCHAR(60);  -- Exemplo de MODIFY
ALTER TABLE FILIAIS CHANGE COLUMN FILIAL_NUMRUA FILIAL_NUMERO_RUA INT;  -- Exemplo de CHANGE

ALTER TABLE PRODUTOS ADD COLUMN PROD_VALIDADE DATE;  -- Exemplo de ADD
ALTER TABLE PRODUTOS DROP COLUMN PROD_VALIDADE;  -- Exemplo de DROP
ALTER TABLE PRODUTOS MODIFY COLUMN PROD_NOME VARCHAR(100);  -- Exemplo de MODIFY
ALTER TABLE PRODUTOS CHANGE COLUMN PROD_ESPECTEC PROD_ESPECIFICACAO TEXT;  -- Exemplo de CHANGE

ALTER TABLE PEDIDOS ADD COLUMN PED_OBS TEXT;  -- Exemplo de ADD
ALTER TABLE PEDIDOS DROP COLUMN PED_OBS;  -- Exemplo de DROP
ALTER TABLE PEDIDOS MODIFY COLUMN PED_STATUS ENUM('PENDENTE', 'CONCLUÍDO', 'EM ESPERA', 'CANCELADO');  -- Exemplo de MODIFY
ALTER TABLE PEDIDOS CHANGE COLUMN PED_PREVISAO PED_DATA_PREVISTA DATE;  -- Exemplo de CHANGE

ALTER TABLE RECEBIMENTOS ADD COLUMN RECEB_OBS TEXT;  -- Exemplo de ADD
ALTER TABLE RECEBIMENTOS DROP COLUMN RECEB_OBS;  -- Exemplo de DROP
ALTER TABLE RECEBIMENTOS MODIFY COLUMN RECEB_CONDICAO VARCHAR(100);  -- Exemplo de MODIFY
ALTER TABLE RECEBIMENTOS CHANGE COLUMN RECEB_QUANT_PROD RECEB_QUANTIDADE DECIMAL(10,3);  -- Exemplo de CHANGE

ALTER TABLE PEDIDOS_PRODUTOS ADD COLUMN PDPR_PRECO_TOTAL DECIMAL(10,2);  -- Exemplo de ADD
ALTER TABLE PEDIDOS_PRODUTOS DROP COLUMN PDPR_PRECO_TOTAL;  -- Exemplo de DROP
ALTER TABLE PEDIDOS_PRODUTOS MODIFY COLUMN PDPR_QUANT DECIMAL(12,3);  -- Exemplo de MODIFY
ALTER TABLE PEDIDOS_PRODUTOS CHANGE COLUMN PDPR_QUANT PDPR_QUANTIDADE DECIMAL(12,3);  -- Exemplo de CHANGE

ALTER TABLE FILIAIS_PRODUTOS ADD COLUMN FLPR_VALIDADE DATE;  -- Exemplo de ADD
ALTER TABLE FILIAIS_PRODUTOS DROP COLUMN FLPR_VALIDADE;  -- Exemplo de DROP
ALTER TABLE FILIAIS_PRODUTOS MODIFY COLUMN FLPR_QUANT DECIMAL(12,3);  -- Exemplo de MODIFY
ALTER TABLE FILIAIS_PRODUTOS CHANGE COLUMN FLPR_QUANT FLPR_QUANTIDADE DECIMAL(12,3);  -- Exemplo de CHANGE

ALTER TABLE FORNECEDORES_PRODUTOS ADD COLUMN FRPR_PRECO_FORNECIDO DECIMAL(10,2);  -- Exemplo de ADD
ALTER TABLE FORNECEDORES_PRODUTOS DROP COLUMN FRPR_PRECO_FORNECIDO;  -- Exemplo de DROP
ALTER TABLE FORNECEDORES_PRODUTOS MODIFY COLUMN FRPR_FORNECEDOR INT NOT NULL;  -- Exemplo de MODIFY
ALTER TABLE FORNECEDORES_PRODUTOS CHANGE COLUMN FRPR_PRODUTOS FRPR_COD_PRODUTO INT;  -- Exemplo de CHANGE

DROP TABLE FORNECEDORES_PRODUTOS;


